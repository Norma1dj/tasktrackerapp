{% extends 'base.html' %}

{% load static %}

{% block title %}
    Project List
{% endblock title %}
{% block content %}
    <header>
        <div>
            <a href="{% url 'list_projects' %}"><lord-icon src="https://cdn.lordicon.com/gmzxduhd.json" trigger="hover" colors="primary:#121331,secondary:#08a88a" style="width:50px"></a>
            <a href="{% url 'show_my_tasks' %}"><lord-icon src="https://cdn.lordicon.com/nocovwne.json" trigger="hover" colors="primary:#121331,secondary:#08a88a" style="width:50px;">
            </lord-icon></a>
            </lord-icon>
        </div>
        <div>
            <h1>My Projects</h1>
            
        </div>
        <nav>
            <ul>
                {% if user.is_authenticated %}
                    <div>
                        <a href="{% url 'logout' %}">
                            <lord-icon src="https://cdn.lordicon.com/moscwhoj.json" trigger="hover" colors="primary:#121331,secondary:#08a88a" style="width:50px;height:50px">
                            </lord-icon>
                        </lord-icon></a>
                    </div>
                {% else %}
                    <li>
                        <a href="{% url 'login' %}">Login</a>
                    </li>
                    <li>
                        <a href="{% url 'signup' %}">Signup</a>
                    </li>
                {% endif %}
            </ul>
        </nav>
    </header>
    <main>
        <div>
            
            {% if projects %}
                <table>
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Number of tasks</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for project in projects %}
                            <tr>
                                <td>
                                    <a href="{% url 'show_project' project.id %}">{{ project.name }}</a>
                                </td>
                                <td>{{ project.tasks.all|length }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
                
            {% else %}
                <p>You are not assigned to any projects.</p>
            {% endif %}
        </div>
    </div>
    <a href="{% url 'create_project' %}"><lord-icon
        src="https://cdn.lordicon.com/mecwbjnp.json"
        trigger="hover"
        colors="primary:#121331,secondary:#08a88a"
        style="width:25px;">
    </lord-icon></a>
</main>
{% endblock content %}
